server {
    listen 80;
    server_name _;

    location / {
        root /srv/dvc-storage;
        dav_methods PUT DELETE MKCOL COPY MOVE;
        create_full_put_path on;
        dav_access group:rw all:r;
        autoindex on;

        # 允许大文件上传
        client_max_body_size 20G;

        # CORS 支持（跨主机推送）
        add_header Access-Control-Allow-Origin *;
        add_header Access-Control-Allow-Methods 'GET, PUT, DELETE, OPTIONS';
        add_header Access-Control-Allow-Headers 'Authorization, Content-Type, Depth, User-Agent, X-File-Size, X-Requested-With, If-Modified-Since, X-File-Name, Cache-Control';

        # 启用 Basic Auth（如不需要可删除）
        auth_basic "Restricted";
        auth_basic_user_file /etc/nginx/.htpasswd;
    }
}
